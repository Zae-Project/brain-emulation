<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Documentation 9 · Neuron Inspector & Analytics</title>
    <style>
      :root {
        --bg: #18100c;
        --surface: #2a1a10;
        --accent: #b07d4f;
        --accent-soft: rgba(176, 125, 79, 0.18);
        --text: #f9eedc;
        --text-muted: #dbc3a5;
        --border: rgba(176, 125, 79, 0.35);
        --code-bg: #3c2414;
      }

      body {
        margin: 0;
        padding: 32px 20px 56px;
        background: var(--bg);
        color: var(--text);
        font-family: "Inter", system-ui, -apple-system, sans-serif;
        line-height: 1.65;
        max-width: 980px;
        margin-inline: auto;
      }

      h1,
      h2,
      h3 {
        color: var(--accent);
        letter-spacing: 0.02em;
        margin-top: 32px;
      }

      h1 {
        font-size: 30px;
        margin-bottom: 18px;
      }

      h2 {
        font-size: 24px;
        margin-bottom: 14px;
      }

      h3 {
        font-size: 20px;
        margin-bottom: 10px;
      }

      p {
        margin: 0 0 16px 0;
      }

      ul {
        margin: 14px 0 18px 24px;
        padding: 0;
      }

      li {
        margin-bottom: 8px;
      }

      code {
        background: var(--code-bg);
        color: var(--accent);
        padding: 3px 6px;
        border-radius: 4px;
        font-family: "JetBrains Mono", Consolas, monospace;
        font-size: 0.95em;
      }

      .callout {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 18px 20px;
        margin: 24px 0;
        color: var(--text-muted);
      }
    </style>
  </head>
  <body>
    <h1>Documentation 9 · Neuron Inspector &amp; Analytics</h1>
    <p>
      The inspector panel is your microscope. It surfaces metadata for the
      selected neuron, exposes connectivity statistics, and provides a live
      voltage trace. This chapter unpacks each section so you can interpret the
      numbers at a glance and extend the analytics with confidence.
    </p>

    <h2>Accessing the Inspector</h2>
    <ol>
      <li>Click any neuron on the canvas. The closest candidate within 30 pixels is selected.</li>
      <li>The panel slides into view on the right-hand side.</li>
      <li>The voltage trace resets and begins recording new samples from the selected neuron.</li>
    </ol>

    <h2>Panel Sections</h2>
    <h3>Region</h3>
    <p>
      Displays <code>regionName</code> from the active template, along with
      provenance notes pulled from <code>metadata</code>. If the preset label
      differs from the region name, both are shown.
    </p>

    <h3>Cluster</h3>
    <p>
      Shows the cluster label, descriptive notes, and a breakdown of peer
      composition (e.g., “Pyramidal neuron: 120 · Basket cell: 30”). The counts
      mirror <code>cluster.groupSummary</code> generated during network build.
    </p>

    <h3>Neuron</h3>
    <ul>
      <li><strong>Name</strong> &mdash; Display label from <code>neuron.neuronTypeName</code>.</li>
      <li><strong>Type</strong> &mdash; Excitatory or inhibitory class, shown alongside the taxonomy name.</li>
      <li><strong>Glyph Badge</strong> &mdash; Matches the canvas shape (see Documentation 5).</li>
      <li><strong>Connectivity</strong> &mdash; Outgoing and incoming edge counts, cluster size, and peer total.</li>
    </ul>

    <h3>Biophysics</h3>
    <p>
      Lists intrinsic parameters such as threshold, leak, refractory period, and
      synaptic constants. Values are either taken directly from the neuron type
      preset or left blank (“—”) if undefined.
    </p>

    <h3>Voltage Trace</h3>
    <p>
      A rolling history of the selected neuron's membrane potential. The trace
      updates each simulation tick and stores ~150 samples. Use it to confirm
      firing threshold behavior or to diagnose runaway excitation.
    </p>

    <div class="callout">
      <strong>Reading the Trace</strong>
      <ul>
        <li>Baseline noise corresponds to background firing probability.</li>
        <li>Spikes appear as sharp rises to the threshold (default 1.0) followed by a reset.</li>
        <li>Flattened traces indicate the neuron is in a refractory period or disconnected.</li>
      </ul>
    </div>

    <h2>Extending the Inspector</h2>
    <ul>
      <li>
        Add new metadata fields to templates (e.g., <code>metadata.receptors</code>) and display them in <code>renderNeuronDetails</code>.
      </li>
      <li>
        Instrument the inspector with custom charts by tapping into <code>neuron.spikeHistory</code>.
      </li>
      <li>
        Use <code>this.state.selectedNeuron</code> to access the active neuron from other UI components.
      </li>
    </ul>

    <p>
      Next, explore <em>Documentation 10 · Advanced Configuration &amp; Manifest</em> to
      learn how presets are auto-discovered and how you can customize the manifest-driven library.
    </p>
  </body>
</html>
